!function(){let e;ymaps.ready(()=>{e=new ymaps.Map("map",{center:[56.011129,92.857413],zoom:13,controls:[]});const t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/marker.svg",iconImageSize:[46,57],iconImageOffset:[-35,-52]});[[56.021129,92.807413],[56.001129,92.817413],[56.031129,92.827413],[56.041129,92.837413]].forEach(e=>{t.add(new ymaps.Placemark(e))}),e.geoObjects.add(t),e.behaviors.disable("scrollZoom")})}(),function(){const o=e=>{const t=e.find(".products-menu__item"),n=e.find(".products-menu__content");t.removeClass("active"),n.width(0)},s=e=>{const t=e.find(".products-menu__content");var n=(e=>{let t=0;var n=$(window).width();const a=e.closest(".products-menu__list"),o=a.find(".products-menu__title");var s=o.width()*o.length;const i=e.find(".products-menu__content-text");var e=parseInt(i.css("padding-left")),r=parseInt(i.css("padding-right")),l=window.matchMedia("(max-width: 768px)").matches,c=window.matchMedia("(max-width: 480px)").matches;return t=l?n-s:500,{container:t=c?n-o.width():t,textContainer:t-e-r}})(e);e.addClass("active");const a=e.find(".products-menu__content-text");console.log(n.textContainer),t.width(n.container),a.width(n.textContainer)};$(".products-menu__title").on("click",e=>{e.preventDefault();const t=$(e.currentTarget),n=t.closest(".products-menu__item");var e=n.hasClass("active"),a=t.closest(".products-menu__list");e?o(a):(o(a),s(n))})}(),function(){const e=document.querySelector(".menu__hamburger"),t=document.querySelector(".fullscrean-menu"),n=document.querySelector(".close__icon");e.addEventListener("click",e=>{e.preventDefault(),t.style.display="flex"}),t.addEventListener("click",e=>{e.target.classList.contains("list")||(t.style.display="none")}),n.addEventListener("click",e=>{e.preventDefault(),t.style.display="none"})}(),$(".form").submit(e=>{e.preventDefault();const t=$(e.currentTarget),n=t.find("[name='name']"),a=t.find("[name='phone']");e=t.find("[name='comment']");const o=t.find("[name='to']"),s=$("#modal"),i=(s.removeClass("error-modal"),s.find(".modal__content"));r=t,[n,a,e,o].forEach(e=>{e.removeClass("input-error"),""===e.val().trim()&&(console.log("empty"),e.addClass("input-error"))});var r,e=0===r.find(".input-error").length;if(console.log(e),e){const l=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:n.val(),phone:a.val(),comment:a.val(),to:o.val()}});l.done(e=>{i.text(e.message)}),l.fail(e=>{e=e.responseJSON.message;i.text(e),s.addClass("error-modal")}),l.always(e=>{Fancybox.show([{src:"#modal",type:"inline",openSpeed:1e3,openEffect:"elastic"}])})}}),$(".app-submit-btn").on("click",e=>{Fancybox.close()}),function(){const a=$(".section"),n=$(".maincontent"),o=$(".fixed-menu"),s=o.find(".fixed-menu__item"),e=new MobileDetect(window.navigator.userAgent);var t=e.mobile();let i=!1;a.first().addClass("active");const r=e=>{e*=-100;return isNaN(e)?(console.error("неверный параметр,ошибка в расчётах countSectionPosition()"),0):e},l=e=>{const t=a.eq(e);e=t.attr("data-sidemenu-theme");"white"===e&&o.removeClass("fixed-menu--shadowed"),"black"===e&&o.addClass("fixed-menu--shadowed")},c=(e,t,n)=>{e.eq(t).addClass(n).siblings().removeClass(n)},d=e=>{var t;i||(i=!0,t=r(e),l(e),n.css({Transform:`translateY(${t}%)`}),c(a,e,"active"),setTimeout(()=>{i=!1,c(s,e,"fixed-menu__item--active")},1300))},m=()=>{const e=a.filter(".active"),t=e.next(),n=e.prev();return{next(){t.length&&d(t.index())},prev(){n.length&&d(n.index())}}};$(window).on("wheel",e=>{e=e.originalEvent.deltaY;const t=m();0<e&&t.next(),e<0&&t.prev()}),$(window).on("keydown",e=>{var t=e.target.tagName.toLowerCase();const n=m();t="input"==t||"textarea"==t;if(!t)switch(e.keyCode){case 38:n.prev();break;case 40:n.next()}}),$("[data-scroll-to]").click(e=>{e.preventDefault();const t=$(e.currentTarget);e=t.attr("data-scroll-to");const n=$(`[data-section-id=${e}]`);d(n.index())}),t&&($(".wrapper").on("touchmove",e=>e.preventDefault()),$("body").swipe({swipe:function(e,t){const n=m();let a="down"===t?"prev":"up"===t?"next":"";n[a]()}}))}();const sliderTiming=$(".player__slider-timing"),sliderVolume=$(".slider__volume");sliderVolume.slider({range:"min",value:33}),sliderTiming.slider({range:"min",value:0});let player;const splashContainer=$(".player__splash"),playerStart=$(".player__start");let eventsInit=()=>{playerStart.click(e=>{splashContainer.hasClass("active")?player.pauseVideo():player.playVideo()}),splashContainer.click(e=>{player.playVideo()})};sliderTiming.click(e=>{var t=sliderTiming.slider("option","value");player.seekTo(t)}),sliderVolume.on("slidechange",e=>{var t=sliderVolume.slider("option","value");player.setVolume(t)});const onPlayerReady=()=>{let e;var t=player.getDuration();sliderTiming.slider("option","max",t),void 0!==e&&clearInterval(e),e=setInterval(()=>{var e=player.getCurrentTime();sliderTiming.slider("option","value",e)},1e3)},onPlayerStateChange=e=>{switch(e.data){case 1:splashContainer.addClass("active"),playerStart.addClass("active");break;case 2:splashContainer.removeClass("active"),playerStart.removeClass("active")}};function onYouTubeIframeAPIReady(){player=new YT.Player("yt-player",{height:"392",width:"662",videoId:"Dd1VIeTMGQs",events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange},playerVars:{controls:0,disablekb:0,showinfo:0,rel:0,autoplay:0,modestbranding:0,fs:0}})}eventsInit(),$(document).ready(function(){$(".review__list").bxSlider({controls:!1,speed:0,pagerCustom:$(".bx-custom-pager")})}),$(document).ready(function(){$(".slyder__list").bxSlider({nextSelector:$(".control--right"),prevSelector:$(".control--left"),prevText:"",nextText:"",pager:!1})}),function(){const s=e=>{const t=e.find(".team__item-info"),n=e.find(".team__item");console.log(n),n.removeClass("active"),t.height(0)};$(".team__item-title").click(e=>{const t=$(e.currentTarget);e=t.closest(".team__list");const n=t.closest(".team__item");if(n.hasClass("active"))s(e);else{s(e);{const a=t.closest(".team__item"),o=a.find(".team__item-info");o.height("100%"),a.addClass("active")}}})}();